!function(k){k.fn.theiaStickySidebar=function(i){function t(i,t){var o,a,e,d,s;n(i,t)||(console.log("TST: Body width smaller than options.minWidth. Init is delayed."),k(document).scroll((d=i,s=t,function(i){var t;n(d,s)&&k(this).unbind(i)})),k(window).resize((a=i,e=t,function(i){var t;n(a,e)&&k(this).unbind(i)})))}function n(i,t){return!0===i.initialized||!(k("body").width()<i.minWidth)&&(o(i,t),!0)}function o(y,i){y.initialized=!0,k("head").append(k('<style>.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>')),i.each(function(){function m(){i.fixedScrollTop=0,i.sidebar.removeClass("is-fixed").css({"min-height":"1px"}),i.stickySidebar.css({position:"static",width:""})}function u(i){var t=i.height();return i.children().each(function(){t=Math.max(t,k(this).height())}),t}var i={};i.sidebar=k(this),i.options=y||{},i.container=k(i.options.containerSelector),0==i.container.size()&&(i.container=i.sidebar.parent()),i.sidebar.parents().css("-webkit-transform","none"),i.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),i.stickySidebar=i.sidebar.find(".theiaStickySidebar"),0==i.stickySidebar.length&&(i.sidebar.find("script").remove(),i.stickySidebar=k("<div>").addClass("theiaStickySidebar").append(i.sidebar.children()),i.sidebar.append(i.stickySidebar)),i.marginTop=parseInt(i.sidebar.css("margin-top")),i.marginBottom=parseInt(i.sidebar.css("margin-bottom")),i.paddingTop=parseInt(i.sidebar.css("padding-top")),i.paddingBottom=parseInt(i.sidebar.css("padding-bottom"));var t=i.stickySidebar.offset().top,o=i.stickySidebar.outerHeight(),a,e;i.stickySidebar.css("padding-top",1),i.stickySidebar.css("padding-bottom",1),t-=i.stickySidebar.offset().top,o=i.stickySidebar.outerHeight()-o-t,i.stickySidebarPaddingTop=0==t?(i.stickySidebar.css("padding-top",0),0):1,i.stickySidebarPaddingBottom=0==o?(i.stickySidebar.css("padding-bottom",0),0):1,i.previousScrollTop=null,i.fixedScrollTop=0,m(),i.onScroll=function(i){if(i.stickySidebar.is(":visible")){if(k("body").width()<i.options.minWidth)return void m();var t;if(i.options.disableOnResponsiveLayouts)if(i.sidebar.outerWidth("none"==i.sidebar.css("float"))+50>i.container.width())return void m();var o=k(document).scrollTop(),a="static";if(o>=i.container.offset().top+(i.paddingTop+i.marginTop-i.options.additionalMarginTop)){var e,d=i.paddingTop+i.marginTop+y.additionalMarginTop,s=i.paddingBottom+i.marginBottom+y.additionalMarginBottom,n=i.container.offset().top,r=i.container.offset().top+u(i.container),c=0+y.additionalMarginTop,p;e=i.stickySidebar.outerHeight()+d+s<k(window).height()?c+i.stickySidebar.outerHeight():k(window).height()-i.marginBottom-i.paddingBottom-y.additionalMarginBottom;var b=n-o+i.paddingTop+i.marginTop,l=r-o-i.paddingBottom-i.marginBottom,g=i.stickySidebar.offset().top-o,h=i.previousScrollTop-o;"fixed"==i.stickySidebar.css("position")&&"modern"==i.options.sidebarBehavior&&(g+=h),"stick-to-top"==i.options.sidebarBehavior&&(g=y.additionalMarginTop),"stick-to-bottom"==i.options.sidebarBehavior&&(g=e-i.stickySidebar.outerHeight()),g=0<h?Math.min(g,c):Math.max(g,e-i.stickySidebar.outerHeight()),g=Math.max(g,b),g=Math.min(g,l-i.stickySidebar.outerHeight());var f=i.container.height()==i.stickySidebar.outerHeight();a=!f&&g==c||!f&&g==e-i.stickySidebar.outerHeight()?"fixed":o+g-i.sidebar.offset().top-i.paddingTop<=y.additionalMarginTop?"static":"absolute"}if("fixed"==a)i.stickySidebar.css({position:"fixed",width:i.sidebar.width(),top:g,left:i.sidebar.offset().left+parseInt(i.sidebar.css("padding-left"))});else if("absolute"==a){var S={};"absolute"!=i.stickySidebar.css("position")&&(S.position="absolute",S.top=o+g-i.sidebar.offset().top-i.stickySidebarPaddingTop-i.stickySidebarPaddingBottom),S.width=i.sidebar.width(),S.left="",i.stickySidebar.css(S)}else"static"==a&&m();"static"!=a&&1==i.options.updateSidebarHeight&&i.sidebar.addClass("is-fixed").css({"min-height":i.stickySidebar.outerHeight()+i.stickySidebar.offset().top-i.sidebar.offset().top+i.paddingBottom}),i.previousScrollTop=o}},i.onScroll(i),k(document).scroll((e=i,function(){e.onScroll(e)})),k(window).resize((a=i,function(){a.stickySidebar.css({position:"static"}),a.onScroll(a)}))})}var a={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern"};(i=k.extend(a,i)).additionalMarginTop=parseInt(i.additionalMarginTop)||0,i.additionalMarginBottom=parseInt(i.additionalMarginBottom)||0,t(i,this)}}(jQuery);